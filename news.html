<!DOCTYPE HTML>
<!--
	Verti by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
	<head>
		<title>é€šå‘Š - æ¾³é–€ç«¥è»ç¸½æœƒ</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<link rel="stylesheet" href="assets/css/main.css" />
		<!-- DataTables CSS -->
		<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.13.7/css/jquery.dataTables.min.css">
		<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/buttons/2.4.2/css/buttons.dataTables.min.css">
		<style>
			/* Custom styles for announcements page */
			.category-nav {
				background: #f8f9fa;
				padding: 1rem;
				border-radius: 8px;
				margin-bottom: 2rem;
				border: 1px solid #e9ecef;
			}
			
			.category-nav h3 {
				margin: 0 0 1rem 0;
				color: #2c5aa0;
				font-size: 1.2rem;
			}
			
			.category-buttons {
				display: flex;
				flex-wrap: wrap;
				gap: 0.5rem;
			}
			
			.category-btn {
				padding: 0.5rem 1rem;
				background: #fff;
				border: 2px solid #2c5aa0;
				color: #2c5aa0;
				text-decoration: none;
				border-radius: 5px;
				transition: all 0.3s ease;
				font-weight: 500;
			}
			
			.category-btn:hover,
			.category-btn.active {
				background: #2c5aa0;
				color: white;
			}
			
			.dataTables_wrapper {
				margin-top: 1rem;
			}
			
			.dataTables_filter {
				display: none; /* éš±è—DataTablesé»˜èªæœç´¢æ¬„ */
			}
			
			.search-container input:focus {
				outline: none;
				border-color: #2c5aa0;
				box-shadow: 0 0 0 3px rgba(44, 90, 160, 0.1);
			}
			
			#announcementsTable {
				width: 100% !important;
			}
			
			#announcementsTable th {
				background: #2c5aa0;
				color: white;
				padding: 12px;
				text-align: left;
			}
			
			#announcementsTable td {
				padding: 10px;
				border-bottom: 1px solid #eee;
			}
			
			/* èª¿æ•´åˆ—å¯¬ */
			#announcementsTable th:nth-child(1),
			#announcementsTable td:nth-child(1) {
				width: 20%; /* é¡åˆ¥åˆ—ä½”20%å¯¬åº¦ */
			}
			
			#announcementsTable th:nth-child(2),
			#announcementsTable td:nth-child(2) {
				width: 60%; /* æ¨™é¡Œåˆ—ä½”60%å¯¬åº¦ */
			}
			
			#announcementsTable th:nth-child(3),
			#announcementsTable td:nth-child(3) {
				width: 20%; /* ç™¼ä½ˆæ™‚é–“åˆ—ä½”20%å¯¬åº¦ */
			}
			
			.category-badge {
				display: inline-block;
				padding: 0.25rem 0.5rem;
				background: #e9ecef;
				color: #495057;
				border-radius: 3px;
				font-size: 0.875rem;
				font-weight: 500;
			}
			
			.category-badge.training { background: #d4edda; color: #155724; }
			.category-badge.activity { background: #d1ecf1; color: #0c5460; }
			.category-badge.international { background: #f8d7da; color: #721c24; }
			.category-badge.general { background: #fff3cd; color: #856404; }
			.category-badge.service { background: #e2e3e5; color: #383d41; }
			
			.news-link {
				color: #2c5aa0;
				text-decoration: none;
				font-weight: 500;
			}
			
			.news-link:hover {
				text-decoration: underline;
			}
			
			.date-cell {
				white-space: nowrap;
				font-family: monospace;
				font-size: 0.9rem;
			}
			
			.loading-message {
				text-align: center;
				padding: 2rem;
				color: #666;
				font-style: italic;
			}
			
			.error-message {
				text-align: center;
				padding: 2rem;
				color: #d32f2f;
				background: #ffebee;
				border-radius: 8px;
				margin: 1rem 0;
			}
			
			@media (max-width: 768px) {
				.category-nav > div {
					flex-direction: column !important;
				}
				
				.category-nav > div > div:last-child {
					margin-left: 0 !important;
					margin-top: 1rem !important;
					width: 100%;
				}
				
				.search-container input {
					width: 100% !important;
				}
				
				.category-buttons {
					flex-direction: column;
				}
				
				.category-btn {
					text-align: center;
				}
			}
		</style>
	</head>
	<body class="is-preload homepage">
		<div id="page-wrapper">

			<!-- Header -->
			<div id="header-wrapper">
				<header id="header" class="container">

					<!-- Logo -->
					<div id="logo">
						<h1><a href="/index.html"><img src="/images/layout/scout-logo-removebg-preview.png" width="505" height="108"></a></h1>
					</div>

					<!-- Nav -->
					<nav id="nav">
						<ul>
						<li><!--é—œæ–¼æˆ‘å€‘-->
									<a href="#">é—œæ–¼æˆ‘å€‘</a>
									<ul>
										<li><a href="/page-about/introduction.html">ç¸½æœƒç°¡ä»‹</a></li>
										<li><a href="/page-about/patrons.html">æœƒå…§äººå“¡</a></li>
										<li><a href="/page-about/structure.html">çµ„ç¹”æ¶æ§‹</a></li>
										<li><a href="/page-about/departments.html">éƒ¨é–€ç°¡ä»‹</a></li>
										<li><a href="/page-about/groups.html">æ—…éƒ¨ç°¡ä»‹</a></li>
										<li><a href="/page-scoutinfo/apply.html">åŠ å…¥ç«¥è»</a></li>
										<li><a href="#">æ›´æ–°æœƒå“¡è­‰</a></li>
										<li><a href="/page-about/forms.html">è¡¨æ ¼</a></li>
									</ul>
								</li>
								<li><!--ç«¥è»é‹å‹•ç°¡ä»‹-->
									<a href="#">ç«¥è»é‹å‹•ç°¡ä»‹</a>
									<ul>
										<li><a href="/page-about/history.html">æ¾³é–€ç«¥è»ç™¼å±•å²</a></li>
										<li><a href="/promise.html">èª“è©éŠ˜è¨€</a></li>
										<li><a href="/page-about/emblem.html">æœƒå¾½</a></li>
										<li><a href="/page-scoutinfo/badge.html">å¾½ç« ä»‹ç´¹</a></li>
										<li><a href="/page-scoutinfo/uniform.html">åˆ¶æœä»‹ç´¹</a></li>
										<li><a href="/page-scoutinfo/ranking.html">è»è·å¾½ç« </a></li>
										<li><a href="/page-scoutinfo/award.html">çå‹µåˆ¶åº¦</a></li>
									</ul>
								</li>
								<li><!--æ”¯éƒ¨ç°¡ä»‹-->
									<a href="#">æ”¯éƒ¨ç°¡ä»‹</a>
									<ul>
										<li><a href="/page-scoutinfo/cub.html">å¹¼ç«¥è»</a></li>
										<li><a href="/page-scoutinfo/scout.html">ç«¥è»</a></li>
										<li><a href="/page-scoutinfo/venture.html">æ·±è³‡ç«¥è»</a></li>
										<li><a href="/page-scoutinfo/wood-badge.html">æˆå¹´é ˜è¢–</a></li>
									</ul>
								</li>
								<li><!--é€šå‘Š-->
									<a href="/news.html">é€šå‘Š</a>
									<ul>
										<li><a href="/news.html?category=training">è¨“ç·´ç­æ¶ˆæ¯</a></li>
										<li><a href="/news.html?category=activity">æ´»å‹•æ¶ˆæ¯</a></li>
										<li><a href="/news.html?category=international">åœ‹éš›æ´»å‹•</a></li>
										<li><a href="/page-scoutinfo/mop.html">MOP å’Œå¹³ä½¿è€…è¨ˆåŠƒ</a></li>
										<li><a href="/news.html?category=general">ç¸½æœƒé€šå‘Š</a></li>
										<li><a href="/news.html?category=service">æœå‹™é€šå‘Š</a></li>
									</ul>
								</li>
							<li><!--åƒè€ƒè³‡æ–™-->
								<a href="#">åƒè€ƒè³‡æ–™</a>
								<ul>
									<li><a href="/newsletters.html">ç«¥è»æœˆåˆŠ</a></li>
									<li><a href="/page-about/references/marching.html">æ¨™æº–æ­¥æ“åŠç¦®å„€</a></li>
									<li><a href="/page-about/references/baden-powell.html">è²ç™»å ¡ç•¥å‚³</a></li>
									<li><a href="/page-about/references/signal.html">ä¸‰æŒ‡è¨˜è™Ÿ</a></li>
									<li><a href="/page-about/references/courtesy.html">ç”Ÿæ´»ç¦®ç¯€</a></li>
									<li><a href="/page-about/references/training.html">å‡ºç‰ˆåˆŠç‰©</a></li>
								</ul>
							</li>
					</ul>
					</nav>

				</header>
			</div>

			<!-- Main -->
			<div id="main-wrapper">
				<div class="container">
					
				<!-- Category Navigation -->
				<div class="category-nav">
					<div style="display: flex; justify-content: space-between; align-items: flex-start; flex-wrap: wrap;">
						<div style="flex: 1; min-width: 300px;">
							<h3>ğŸ“‚ é€šå‘Šåˆ†é¡</h3>
							<div class="category-buttons">
								<a href="news.html" class="category-btn" id="btn-all">å…¨éƒ¨é€šå‘Š</a>
								<a href="news.html?category=training" class="category-btn" id="btn-training">è¨“ç·´ç­æ¶ˆæ¯</a>
								<a href="news.html?category=activity" class="category-btn" id="btn-activity">æ´»å‹•æ¶ˆæ¯</a>
								<a href="news.html?category=international" class="category-btn" id="btn-international">åœ‹éš›æ´»å‹•</a>
								<a href="news.html?category=general" class="category-btn" id="btn-general">ç¸½æœƒé€šå‘Š</a>
								<a href="news.html?category=service" class="category-btn" id="btn-service">æœå‹™é€šå‘Š</a>
							</div>
						</div>
						<div style="flex: 0 0 auto; margin-left: 2rem; margin-top: 2rem;">
							<div class="search-container">
								<input type="text" id="custom-search" placeholder="æœç´¢é€šå‘Šæ¨™é¡Œã€é¡åˆ¥æˆ–é—œéµå­—..." style="width: 300px; padding: 0.75rem; border: 2px solid #ddd; border-radius: 6px; font-size: 1rem; box-sizing: border-box; transition: border-color 0.3s ease;">
							</div>
						</div>
					</div>
				</div>
					
					<!-- Announcements Table -->
					<div class="row gtr-200">
						<div class="col-12">
							<div id="content">
								<div id="loading-message" class="loading-message">
									æ­£åœ¨è¼‰å…¥é€šå‘Šè³‡æ–™...
								</div>
								<div id="error-message" class="error-message" style="display: none;">
									è¼‰å…¥é€šå‘Šè³‡æ–™æ™‚ç™¼ç”ŸéŒ¯èª¤ï¼Œè«‹ç¨å¾Œå†è©¦ã€‚
								</div>
								<table id="announcementsTable" class="display" style="width:100%; display: none;">
									<thead>
										<tr>
											<th>é¡åˆ¥</th>
											<th>æ¨™é¡Œ</th>
											<th>ç™¼ä½ˆæ™‚é–“</th>
										</tr>
									</thead>
									<tbody>
										<!-- Data will be populated dynamically from news.md -->
									</tbody>
								</table>
							</div>
						</div>
					</div>
					
				</div>
			</div>

			<!-- Footer -->
			<div id="footer-wrapper">
				<footer id="footer" class="container">
					<div class="row">
					<div class="col-6 col-6-medium col-12-small">
						
						<!-- Links -->
						<section class="widget links d-none">
							<h3>è¿‘æœŸæ´»å‹•</h3>
							<div class="d-none d-lg-block">
								<iframe src="https://www.google.com/calendar/embed?mode=AGENDA&amp;height=300&amp;wkst=1&amp;bgcolor=%23FFFFFF&amp;src=rks8lssh5vrqagv4cu6vr444fs%40group.calendar.google.com&amp;color=%235229A3&amp;src=e63o9v6i6hq7ms03kjtr2mt7t4%40group.calendar.google.com&amp;color=%23060D5E&amp;ctz=Asia%2FMacau" style=" border-width:0" width="600" height="300" frameborder="0" scrolling="no"></iframe>									<ul class="style2">
							</div>
							</ul>
						</section>
						
					</div>
					<div class="col-3 col-6-medium col-12-small">
						
						<!-- Links -->
						<section class="widget links">
							<h3>ç›¸é—œç¶²ç«™</h3>
							<ul class="style2">
								<li><a target="_blank" href="https://www.scout.org">ä¸–ç•Œç«¥è»ç¸½æœƒ</a></li>
								<li><a target="_blank" href="https://www.scout.org/where-we-work/regions/asia-pacific/region">äºå¤ªç«¥è»ç¸½æœƒ</a></li>
								<li><a target="_blank" href="https://www.scout.org.hk/tc/">é¦™æ¸¯ç«¥è»ç¸½æœƒ</a></li>
							</ul>
							<h3>è³‡è¨Šç³»çµ±</h3>
							<ul class="style2">
								<li><a href="#">ç¤¾æœƒæœå‹™ç”³å ±ç³»çµ±</a></li>
								<li><a href="#">å°ˆç« å ±åç³»çµ±</a></li>
							</ul>
						</section>

					</div>
					<div class="col-3 col-6-medium col-12-small">

						<!-- Contact -->
							<section class="widget contact last">
								<h3>è¯çµ¡æˆ‘å€‘</h3>
								<ul>
									<li><a href="mailto:scoutmac@macau.ctm.net" class="icon far fa-envelope"><span class="label">Email</span></a></li>
								</ul>
								<p>æ¾³é–€æ°¹ä»”ç›§ä¼¯å¾·åœ“å½¢åœ°æ°¹ä»”ç‚®è‡º<br />
									tel: +853 28780411<br />
									fax: +853 28780412</p>
							</section>

					</div>
					</div>
					<div class="row">
						<div class="col-12">
							<div id="copyright">
								<ul class="menu">
									<li>&copy; 2025 THE SCOUT ASSOCIATION OF MACAU. All rights reserved æœ¬ç¶²ç«™ç‰ˆæ¬Šç‚ºæ¾³é–€ç«¥è»ç¸½æœƒæ‰€æœ‰</li><li>Design: <a href="http://html5up.net">HTML5 UP</a></li>
								</ul>
							</div>
						</div>
					</div>
				</footer>
			</div>

		</div>

		<!-- Scripts -->
		<script src="assets/js/jquery.min.js"></script>
		<script src="assets/js/jquery.dropotron.min.js"></script>
		<script src="assets/js/browser.min.js"></script>
		<script src="assets/js/breakpoints.min.js"></script>
		<script src="assets/js/util.js"></script>
		<script src="assets/js/main.js"></script>
		
		<!-- DataTables JavaScript -->
		<script type="text/javascript" src="https://cdn.datatables.net/1.13.7/js/jquery.dataTables.min.js"></script>
		<script type="text/javascript" src="https://cdn.datatables.net/buttons/2.4.2/js/dataTables.buttons.min.js"></script>
		
		<script>
			// Category mapping
			const categoryMapping = {
				'è¨“ç·´ç­æ¶ˆæ¯': 'training',
				'æ´»å‹•æ¶ˆæ¯': 'activity',
				'åœ‹éš›æ´»å‹•': 'international',
				'ç¸½æœƒé€šå‘Š': 'general',
				'æœå‹™é€šå‘Š': 'service'
			};
			
			const categoryMappingReverse = {
				'training': 'è¨“ç·´ç­æ¶ˆæ¯',
				'activity': 'æ´»å‹•æ¶ˆæ¯',
				'international': 'åœ‹éš›æ´»å‹•',
				'general': 'ç¸½æœƒé€šå‘Š',
				'service': 'æœå‹™é€šå‘Š'
			};
			
			// Get category badge class
			function getCategoryBadgeClass(categoryKey) {
				const classMap = {
					'training': 'training',
					'activity': 'activity',
					'international': 'international',
					'general': 'general',
					'service': 'service'
				};
				return classMap[categoryKey] || 'general';
			}
			
            async function loadApiNotices(key, categoryName, categoryKey) {
        try {
            const apiUrl = `https://scout.wpang.net/INT/api/javascript.php?key=${key}`;
            const response = await fetch(apiUrl);
            
            if (!response.ok) {
                throw new Error(`HTTP error! status: ${response.status}`);
            }
            
            const scriptText = await response.text();
            
            // Extract HTML from document.write() calls
            const writeMatches = scriptText.match(/document\.write\(['"](.+?)['"]\)/g);
            if (!writeMatches) {
                return [];
            }
            
            let htmlContent = '';
            writeMatches.forEach(match => {
                const content = match.match(/document\.write\(['"](.+?)['"]\)/)[1];
                htmlContent += content;
            });
            
            // Unescape the HTML content (same as index.html)
            const unescapedHtml = htmlContent
                .replace(/\\n/g, '\n')
                .replace(/\\t/g, '\t')
                .replace(/\\'/g, "'")
                .replace(/\\"/g, '"')
                .replace(/\\\\/g, '\\');
            
            // Parse HTML content
            const temp = document.createElement('div');
            temp.innerHTML = unescapedHtml;
            
            // Look for news-item structure with dates
            const newsItems = temp.querySelectorAll('.news-item');
            const results = [];
            
            if (newsItems.length > 0) {
                // New API format with dates
                newsItems.forEach(item => {
                    const linkElem = item.querySelector('h3 a');
                    const dateElem = item.querySelector('.date');
                    
                    if (linkElem) {
                        // Use getAttribute to get the raw href value
                        let link = linkElem.getAttribute('href') || '';
                        
                        // Remove surrounding quotes if present
                        link = link.replace(/^['"]|['"]$/g, '');
                        
                        // Replace domain (same logic as index.html)
                        if (link) {
                            // Handle both http and https
                            link = link.replace(/https?:\/\/www\.scout\.org\.mo/gi, 'https://scout.wpang.net');
                            link = link.replace(/www\.scout\.org\.mo/gi, 'https://scout.wpang.net');
                            // Ensure https protocol
                            if (link.startsWith('http://')) {
                                link = 'https://' + link.substring(7);
                            }
                        }
                        
                        // Extract and format date
                        let formattedDate = '';
                        if (dateElem) {
                            const dateText = dateElem.textContent.trim();
                            // Convert YYå¹´MMæœˆDDæ—¥ HH:MM to YYYYå¹´MMæœˆDDæ—¥ HH:MM
                            const match = dateText.match(/(\d{2})å¹´(\d{2})æœˆ(\d{2})æ—¥\s+(\d{2}):(\d{2})/);
                            if (match) {
                                const year = parseInt(match[1]) + 2000;
                                formattedDate = `${year}å¹´${match[2]}æœˆ${match[3]}æ—¥ ${match[4]}:${match[5]}`;
                            }
                        }
                        
                        results.push({
                            title: linkElem.textContent.trim(),
                            category: categoryName,
                            categoryKey: categoryKey,
                            link: link,
                            date: formattedDate,
                            keywords: categoryName
                        });
                    }
                });
            } else {
                // Old API format without dates (fallback)
                const items = temp.querySelectorAll('a');
                items.forEach(a => {
                    let link = a.getAttribute('href') || '';
                    
                    // Remove surrounding quotes if present
                    link = link.replace(/^['"]|['"]$/g, '');
                    
                    // Replace domain (same logic as index.html)
                    if (link) {
                        // Handle both http and https
                        link = link.replace(/https?:\/\/www\.scout\.org\.mo/gi, 'https://scout.wpang.net');
                        link = link.replace(/www\.scout\.org\.mo/gi, 'https://scout.wpang.net');
                        // Ensure https protocol
                        if (link.startsWith('http://')) {
                            link = 'https://' + link.substring(7);
                        }
                    }
                    
                    results.push({
                        title: a.textContent.trim(),
                        category: categoryName,
                        categoryKey: categoryKey,
                        link: link,
                        date: '',
                        keywords: categoryName
                    });
                });
            }
            
            return results;
        } catch (error) {
            console.error(`Error loading API notices for ${categoryName}:`, error);
            return [];
        }
    }

			// Function to parse news.md content
			function parseNewsMarkdown(markdownText) {
				const lines = markdownText.split('\n');
				const news = [];
				let currentNews = null;
				
				for (let line of lines) {
					line = line.trim();
					if (!line) continue;
					
					// Check if this is a category line
					const categoryFound = line.startsWith('- ') && currentNews && Object.keys(categoryMappingReverse).some(key => categoryMappingReverse[key] === line.substring(2).trim());
					// Check if this is a news title line (starts with -)
					if (line.startsWith('- ') && !line.includes('http') && !Object.keys(categoryMappingReverse).some(key => categoryMappingReverse[key] === line.substring(2).trim()) && !line.includes('å¹´') && !line.includes('é—œéµå­—')) {
						// Save previous news if exists
						if (currentNews) {
							news.push(currentNews);
						}
						
						// Start new news
						currentNews = {
							title: line.substring(2).trim(), // Remove "- " prefix
							category: '',
							categoryKey: '',
							link: '',
							date: '',
							keywords: ''
						};
					}
					else if (categoryFound) {
						const categoryName = line.substring(2).trim();
						currentNews.category = categoryName;
						currentNews.categoryKey = categoryMapping[categoryName] || 'general';
					}
					// Check if this is a link line (contains http)
					else if (line.includes('http') && currentNews) {
						// Extract URL from the line
						const urlMatch = line.match(/https?:\/\/[^\s]+/);
						if (urlMatch) {
							currentNews.link = urlMatch[0];
						}
					}
					// Check if this is a date line (contains å¹´ and æ—¥)
					else if (line.includes('å¹´') && line.includes('æ—¥') && currentNews) {
						const dateMatch = line.match(/(\d{4}å¹´\d{2}æœˆ\d{2}æ—¥\s+\d{2}:\d{2})/);
						if (dateMatch) {
							currentNews.date = dateMatch[1];
						} else {
							// Try to extract any date-like pattern
							const simpleDateMatch = line.match(/\d{4}å¹´\d{2}æœˆ\d{2}æ—¥\s+\d{2}:\d{2}/);
							if (simpleDateMatch) {
								currentNews.date = simpleDateMatch[0];
							}
						}
					}
					// Check if this is a keywords line
					else if (line.includes('é—œéµå­—') && currentNews) {
						currentNews.keywords = line.substring(line.indexOf('-') + 1).trim();
					}
				}
				
				// Don't forget the last news
				if (currentNews) {
					news.push(currentNews);
				}
				
				return news;
			}
			
			// Function to load announcements from markdown file
			async function loadAnnouncements() {
				try {
					const response = await fetch('news.md');
					if (!response.ok) {
						throw new Error(`HTTP error! status: ${response.status}`);
					}
					
					const markdownText = await response.text();
					const newsData = parseNewsMarkdown(markdownText);



// 2ï¸âƒ£ å„ API ä¸²æ¥
const hqNotices = await loadApiNotices("AEM2013Page_HQNotices", "ç¸½æœƒé€šå‘Š", "general");
const trainingNotices = await loadApiNotices("AEM2013Page_Training", "è¨“ç·´ç­æ¶ˆæ¯", "training");
const activityNotices = await loadApiNotices("AEM2013Page_Activities", "æ´»å‹•æ¶ˆæ¯", "activity");

// 3ï¸âƒ£ åˆä½µæ‰€æœ‰ä¾†æº
const combinedData = [
    ...hqNotices,
    ...trainingNotices,
    ...activityNotices,
    ...newsData
];

// 4ï¸âƒ£ ç”¨ combinedData åˆå§‹åŒ– DataTable
initializeDataTable(combinedData);
						
						// Hide loading message
						document.getElementById('loading-message').style.display = 'none';
						
						// Show table
						document.getElementById('announcementsTable').style.display = 'table';
					
				} catch (error) {
					console.error('Error loading announcements:', error);
					
					// Hide loading message
					document.getElementById('loading-message').style.display = 'none';
					
					// Show error message
					document.getElementById('error-message').style.display = 'block';
					document.getElementById('error-message').innerHTML = 
						'è¼‰å…¥é€šå‘Šè³‡æ–™æ™‚ç™¼ç”ŸéŒ¯èª¤ï¼š' + error.message + '<br>è«‹æª¢æŸ¥ news.md æ–‡ä»¶æ˜¯å¦å­˜åœ¨ä¸”æ ¼å¼æ­£ç¢ºã€‚';
				}
			}
			
			// Function to initialize DataTable
			function initializeDataTable(newsData) {
				// Get URL parameter
				function getUrlParameter(name) {
					name = name.replace(/[\[]/, '\\[').replace(/[\]]/, '\\]');
					var regex = new RegExp('[\\?&]' + name + '=([^&#]*)');
					var results = regex.exec(location.search);
					return results === null ? '' : decodeURIComponent(results[1].replace(/\+/g, ' '));
				}
				
				// Get current category from URL
				const currentCategory = getUrlParameter('category');
				
				// Set active button
				if (currentCategory) {
					$('#btn-' + currentCategory).addClass('active');
				} else {
					$('#btn-all').addClass('active');
				}
				
				// Initialize DataTable
				const table = $('#announcementsTable').DataTable({
					data: newsData,
					columns: [
						{
							data: 'category',
							render: function(data, type, row) {
								return '<span class="category-badge ' + getCategoryBadgeClass(row.categoryKey) + '">' + data + '</span>';
							}
						},
						{
							data: 'title',
							render: function(data, type, row) {
								if (row.link) {
									return '<a href="' + row.link + '" target="_blank" class="news-link">' + data + '</a>';
								} else {
									return '<span class="news-link">' + data + '</span>';
								}
							}
						},
					{
						data: 'date',
						className: 'date-cell',
						render: function(data, type, row) {
							if (type === 'sort' || type === 'type') {
								return data || '';
							}
							return data || '-';
						}
					}
					],
					order: [[2, 'desc']], // Sort by date descending
					pageLength: 25,
					language: {
						"sProcessing": "è™•ç†ä¸­...",
						"sLengthMenu": "é¡¯ç¤º _MENU_ é …çµæœ",
						"sZeroRecords": "æ²’æœ‰åŒ¹é…çµæœ",
						"sInfo": "é¡¯ç¤ºç¬¬ _START_ è‡³ _END_ é …çµæœï¼Œå…± _TOTAL_ é …",
						"sInfoEmpty": "é¡¯ç¤ºç¬¬ 0 è‡³ 0 é …çµæœï¼Œå…± 0 é …",
						"sInfoFiltered": "(ç”± _MAX_ é …çµæœéæ¿¾)",
						"sInfoPostFix": "",
						"sSearch": "",
						"sUrl": "",
						"sEmptyTable": "è¡¨ä¸­æ•¸æ“šç‚ºç©º",
						"sLoadingRecords": "è¼‰å…¥ä¸­...",
						"sInfoThousands": ",",
						"oPaginate": {
							"sFirst": "é¦–é ",
							"sPrevious": "ä¸Šé ",
							"sNext": "ä¸‹é ",
							"sLast": "æœ«é "
						},
						"oAria": {
							"sSortAscending": ": ä»¥å‡åºæ’åˆ—æ­¤åˆ—",
							"sSortDescending": ": ä»¥é™åºæ’åˆ—æ­¤åˆ—"
						}
					},
					responsive: true,
					dom: 'rtip', // ç§»é™¤æœç´¢æ¬„ï¼Œåªä¿ç•™è¡¨æ ¼ã€ä¿¡æ¯å’Œåˆ†é 
					initComplete: function() {
						// é€£æ¥è‡ªå®šç¾©æœç´¢æ¬„
						$('#custom-search').on('keyup', function() {
							table.search(this.value).draw();
						});
					}
				});
				
				// Apply category filter if specified
				if (currentCategory && categoryMappingReverse[currentCategory]) {
					table.column(0).search(categoryMappingReverse[currentCategory]).draw();
				}
				
				// Add custom search functionality for keywords
				$.fn.dataTable.ext.search.push(function(settings, data, dataIndex) {
					if (settings.nTable.id !== 'announcementsTable') {
						return true;
					}
					
					const searchTerm = table.search().toLowerCase();
					if (!searchTerm) {
						return true;
					}
					
					const rowData = newsData[dataIndex];
					const searchableText = (
						rowData.title + ' ' + 
						rowData.category + ' ' + 
						rowData.keywords
					).toLowerCase();
					
					return searchableText.includes(searchTerm);
				});
			}
			
			// Load announcements when document is ready
			$(document).ready(function() {
				loadAnnouncements();
			});
		</script>
	</body>
</html>
